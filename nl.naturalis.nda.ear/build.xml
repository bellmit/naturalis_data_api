<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project basedir="." name="nl.naturalis.nda.ear" default="build">

    <import file="../nl.naturalis.nda.build/common.xml" />
    
    <property name="earfile" location="build/naturalis-data-api.ear" />   
    <property name="assemblydir" location="build/nda" />

    <target name="clean">
        <delete file="${earfile}" />
        <delete dir="${assemblydir}" />
    </target>
    
    <target name="package">
        <mkdir dir="${assemblydir}"/>
        <copy todir="${assemblydir}">
            <fileset dir="EarContent"/>
        </copy>
        <copy file="${nl.naturalis.nda.ejb.location}/build/nl.naturalis.nda.ejb.jar" todir="${assemblydir}" />
        <copy file="${nl.naturalis.nda.service.rest.location}/build/nl.naturalis.nda.service.rest.war" todir="${assemblydir}" />
        <copy file="${nl.naturalis.nda.domain.location}/build/nl.naturalis.nda.domain.jar" todir="${assemblydir}/lib" />
        <jar destfile="${earfile}" basedir="${assemblydir}" />
    </target>
    
    <target name="build" depends="package"/>

</project>
