<?xml version="1.0" encoding="UTF-8"?>
<project xmlns:ivy="antlib:org.apache.ivy.ant" xmlns:if="ant:if" xmlns:unless="ant:unless" basedir="." name="nl.naturalis.nda.build">

	<property file="build.properties" />

	<path id="ivy.lib.path">
		<fileset dir="${ivy.home}" includes="*.jar" />
	</path>
	<taskdef resource="org/apache/ivy/ant/antlib.xml" uri="antlib:org.apache.ivy.ant" classpathref="ivy.lib.path" />

	<tstamp>
		<format property="now" pattern="yyyy_MM_dd___HH_mm_ss" locale="en" />
	</tstamp>

	<!--
		Fake task that only signals to subsequent tasks that
		they should first do what they consider to be a cleanup
	-->
	<target name="rebuild">
		<property name="signal.clean" value="on" />
	</target>

	<target name="cleanup">
		<ant antfile="../nl.naturalis.nda.domain/build.xml" target="clean" useNativeBasedir="true" inheritrefs="true" />
		<ant antfile="../nl.naturalis.nda.elasticsearch.dao./build.xml" target="clean" useNativeBasedir="true" inheritrefs="true" />
		<ant antfile="../nl.naturalis.nda.ejb/build.xml" target="clean" useNativeBasedir="true" inheritrefs="true" />
		<ant antfile="../nl.naturalis.nda.service.rest/build.xml" target="clean" useNativeBasedir="true" inheritrefs="true" />
		<ant antfile="../nl.naturalis.nda.ear/build.xml" target="clean" useNativeBasedir="true" inheritrefs="true" />
		<ant antfile="../nl.naturalis.nda.elasticsearch.load./build.xml" target="clean" useNativeBasedir="true" inheritrefs="true" />
	</target>

	<target name="domain">
		<ant antfile="../nl.naturalis.nda.domain/build.xml" useNativeBasedir="true" inheritrefs="true" />
	</target>

	<target name="ejb">
		<ant antfile="../nl.naturalis.nda.ejb/build.xml" useNativeBasedir="true" inheritrefs="true" />
	</target>

	<target name="rest">
		<ant antfile="../nl.naturalis.nda.service.rest/build.xml" useNativeBasedir="true" inheritrefs="true" />
	</target>

	<target name="ear">
		<ant antfile="../nl.naturalis.nda.ear/build.xml" useNativeBasedir="true" inheritrefs="true" />
	</target>

	<target name="load">
		<ant antfile="../nl.naturalis.nda.elasticsearch.load/build.xml" useNativeBasedir="true" inheritrefs="true" />
	</target>

	<target name="build" depends="ear,load" />

	<target name="eclipse">
		<ant antfile="../nl.naturalis.nda.ear/build.xml" useNativeBasedir="true" inheritrefs="true" target="eclipse" />
	</target>


</project>